---
phase: 08-billing-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/billing/BILLING-SYSTEM-OVERVIEW.md
  - docs/billing/USER-RESOLUTION-PLAN.md
autonomous: false

must_haves:
  truths:
    - "Alexandria can reference documentation explaining how admin panel subscription changes work vs Stripe"
    - "Documentation clearly states: admin panel changes do NOT trigger Stripe charges"
    - "Dagmar's billing situation is documented with recommended resolution"
    - "Becky's billing situation is documented with recommended resolution"
    - "User can verify current state in admin panel to confirm no double-billing from platform"
  artifacts:
    - path: "docs/billing/BILLING-SYSTEM-OVERVIEW.md"
      provides: "Comprehensive billing system documentation for Alexandria"
      contains: "Admin Panel Subscription Editing"
    - path: "docs/billing/USER-RESOLUTION-PLAN.md"
      provides: "Specific resolution steps for Dagmar and Becky"
      contains: "dagmar@insidesmatch.com"
  key_links:
    - from: "USER-RESOLUTION-PLAN.md"
      to: "BILLING-SYSTEM-OVERVIEW.md"
      via: "Cross-reference to billing behavior"
      pattern: "See.*BILLING-SYSTEM-OVERVIEW"
---

<objective>
Create billing documentation for Alexandria explaining how the platform billing works vs legacy Stripe, and provide a resolution plan for Dagmar and Becky's double-billing risk.

Purpose: Alexandria needs to understand that admin panel subscription changes do NOT trigger Stripe charges. This documentation will prevent future confusion and provide clear steps to resolve the legacy user billing situation.

Output: Two documentation files in `docs/billing/` - one explaining billing behavior, one providing specific user resolution steps.
</objective>

<execution_context>
@/home/qualia/.claude/get-shit-done/workflows/execute-plan.md
@/home/qualia/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-billing-documentation/08-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Billing System Overview Documentation</name>
  <files>docs/billing/BILLING-SYSTEM-OVERVIEW.md</files>
  <action>
Create `docs/billing/` directory if it does not exist.

Create `docs/billing/BILLING-SYSTEM-OVERVIEW.md` with the following structure:

1. **Executive Summary** - One paragraph for Alexandria: "When you change a user's subscription type in the admin panel, this ONLY updates the database. It does NOT create a Stripe subscription or trigger any charges."

2. **Two Billing Systems**
   - Platform Stripe Checkout (for new users via /pricing)
   - Admin Panel Editing (database-only, for manual user management)
   - Clear comparison table

3. **What Admin Panel Subscription Changes Do**
   - Updates local database fields (subscriptionType, subscriptionStatus, dates)
   - Does NOT create Stripe customer or subscription
   - Does NOT trigger charges
   - stripeCustomerId and stripeSubscriptionId remain NULL

4. **What Platform Stripe Checkout Does**
   - Creates real Stripe Customer and Subscription
   - Triggers automatic billing
   - Webhooks sync status back to database

5. **How to Tell Which System a User Is On**
   - Check stripeCustomerId in admin panel
   - NULL = admin-added (no Stripe billing)
   - Has value = platform checkout (Stripe billing active)

6. **FAQ Section**
   - "Does changing Monthly trigger charges?" - No
   - "How do admin-added users get billed?" - They don't, unless separate Stripe subscription exists
   - "What about legacy users like Dagmar/Becky?" - See USER-RESOLUTION-PLAN.md

Use clear, non-technical language. Alexandria is the primary audience.
  </action>
  <verify>
- File exists at docs/billing/BILLING-SYSTEM-OVERVIEW.md
- Contains "Admin Panel" and "Stripe" comparison
- Contains FAQ section
- Word count > 500 (comprehensive but readable)
  </verify>
  <done>Documentation file exists explaining platform billing behavior in clear, non-technical language with FAQ section answering common questions.</done>
</task>

<task type="auto">
  <name>Task 2: Create User Resolution Plan for Legacy Users</name>
  <files>docs/billing/USER-RESOLUTION-PLAN.md</files>
  <action>
Create `docs/billing/USER-RESOLUTION-PLAN.md` with the following structure:

1. **Situation Summary**
   - Dagmar (dagmar@insidesmatch.com) and Becky were added manually to the platform
   - They may have separate legacy Stripe subscriptions in Alexandria's original Stripe account
   - Admin panel shows them as "Monthly" but this does NOT connect to Stripe

2. **Risk Assessment**
   - Platform admin panel: NO double-billing risk (does not charge)
   - Legacy Stripe: MAY continue charging if subscription exists
   - Resolution needed: Determine single billing source

3. **Option A: Cancel Legacy Stripe (Recommended)**
   - Steps:
     1. Log into Alexandria's legacy/original Stripe account
     2. Search for dagmar@insidesmatch.com subscription
     3. Cancel the subscription (immediate or at period end)
     4. Leave platform admin panel subscription as-is
   - Result: Platform tracks status, no Stripe charges
   - Pros: Clean, single source of truth
   - Cons: Must manually renew when period ends (or user goes through platform checkout)

4. **Option B: Keep Legacy Stripe Active**
   - Steps:
     1. Leave legacy Stripe subscriptions active
     2. Note in admin panel that billing is external
   - Result: Legacy Stripe charges, platform tracks status
   - Pros: No change to billing
   - Cons: Platform status may drift from Stripe status

5. **Dagmar Resolution Checklist**
   - [ ] Verify dagmar@insidesmatch.com exists in admin panel
   - [ ] Check stripeCustomerId (should be NULL if admin-added)
   - [ ] Check legacy Stripe account for subscription
   - [ ] Choose Option A or B
   - [ ] Document which option was chosen

6. **Becky Resolution Checklist**
   - [ ] Identify Becky's email in admin panel
   - [ ] Check stripeCustomerId
   - [ ] Check legacy Stripe account for subscription
   - [ ] Choose Option A or B
   - [ ] Document which option was chosen

7. **Cross-Reference**
   - Link to BILLING-SYSTEM-OVERVIEW.md for full explanation

Make the document actionable with checklists Alexandria can follow.
  </action>
  <verify>
- File exists at docs/billing/USER-RESOLUTION-PLAN.md
- Contains Dagmar's email (dagmar@insidesmatch.com)
- Contains resolution options A and B
- Contains checklists for both users
- References BILLING-SYSTEM-OVERVIEW.md
  </verify>
  <done>Resolution plan exists with specific checklists for Dagmar and Becky, two resolution options with pros/cons, and cross-reference to billing overview.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Created billing documentation explaining how the platform billing system works vs legacy Stripe, and a resolution plan for Dagmar and Becky's double-billing risk.
  </what-built>
  <how-to-verify>
1. Review `docs/billing/BILLING-SYSTEM-OVERVIEW.md`:
   - Confirm it explains admin panel vs Stripe in clear language
   - Confirm FAQ section answers common questions
   - Share with Alexandria for feedback if desired

2. Review `docs/billing/USER-RESOLUTION-PLAN.md`:
   - Confirm Dagmar and Becky checklists are actionable
   - Verify recommendations make sense for your situation

3. Verify admin panel state (optional now, required before resolution):
   - Go to admin panel (/admin/users)
   - Find dagmar@insidesmatch.com
   - Confirm stripeCustomerId is NULL (meaning platform is NOT billing)
   - Find Becky's account
   - Confirm same

4. Decide on resolution approach:
   - Option A (cancel legacy Stripe) - recommended
   - Option B (keep legacy Stripe, document)

Note: The actual resolution (canceling legacy Stripe) must be done by Alexandria in her Stripe dashboard. This documentation tells her how.
  </how-to-verify>
  <resume-signal>Type "approved" to complete the phase, or describe any changes needed to the documentation.</resume-signal>
</task>

</tasks>

<verification>
1. `docs/billing/BILLING-SYSTEM-OVERVIEW.md` exists with comprehensive billing explanation
2. `docs/billing/USER-RESOLUTION-PLAN.md` exists with Dagmar/Becky checklists
3. Documentation is written in clear, non-technical language for Alexandria
4. Cross-references between documents work
5. User has verified admin panel state for target users
</verification>

<success_criteria>
- BILL-01 Complete: Documentation exists explaining platform billing vs legacy Stripe
- BILL-02 Complete: Dagmar resolution plan documented with checklist
- BILL-03 Complete: Becky resolution plan documented with checklist
- Alexandria can use documentation to resolve double-billing risk herself
</success_criteria>

<output>
After completion, create `.planning/phases/08-billing-documentation/08-01-SUMMARY.md`
</output>
